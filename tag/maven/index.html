<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    Maven | 代码人生
</title>
<link rel="shortcut icon" href="https://shingmoyeung.coding.me/favicon.ico?v=1569673769938">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://shingmoyeung.coding.me/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://shingmoyeung.coding.me/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-148889074-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-148889074-1');
    </script>
    
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://shingmoyeung.coding.me">
                <img class="avatar" src="https://shingmoyeung.coding.me/images/avatar.png?v=1569673769938" alt="">
            </a>
            <div class="site-title">
                <h1>
                    代码人生
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    首页
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    关于
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-container main-container">
                <div id="content" class="main-container-left">
                    
    <div class="i-card">
        <b>标签：#
        Maven</b>
    </div>
    
        
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://shingmoyeung.coding.me/post/shi-yong-java-deng-lu-yuan-cheng-linux-bing-dui-fu-wu-shi-xian-ge-chong-cao-zuo">
                        使用Java登录远程Linux并对服务实现各种操作
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-03-06 21:30</time>
                    
                        <a href="https://shingmoyeung.coding.me/tag/maven" class="post-tag i-tag
                            i-tag-other_2">
            #Maven
        </a>
                        
                        <a href="https://shingmoyeung.coding.me/tag/2019-03" class="post-tag i-tag
                            i-tag-banana">
            #2019-03
        </a>
                        
                        <a href="https://shingmoyeung.coding.me/tag/linux" class="post-tag i-tag
                            i-tag-banana">
            #Linux
        </a>
                        
                        <a href="https://shingmoyeung.coding.me/tag/dai-ma-na-xie-shi-er" class="post-tag i-tag
                            i-tag-primary">
            #代码那些事儿
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            本文采用jar依赖为
&amp;lt;!-- SSH2连接Linux服务器依赖 https://mvnrepository.com/artifact/ch.ethz.ganymed/ganymed-ssh2 --&amp;gt;
&amp;lt;dependency&amp;gt;
   &amp;lt;groupId&amp;gt;ch.ethz.ganymed&amp;lt;/groupId&amp;gt;
   &amp;lt;artifactId&amp;gt;ganymed-ssh2&amp;lt;/artifactId&amp;gt;
   &amp;lt;version&amp;gt;build210&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;

在访问linux时，首先需要使用工具类jar包：ganymed-ssh2
登录远程服务器：
public boolean login(){
	//创建远程连接，默认连接端口为22，如果不使用默认，可以使用方法
	//new Connection(ip, port)创建对象
	Connection conn = new Connection(ip);        
	try {
		//连接远程服务器
		conn.connect();
		//使用用户名和密码登录
        return conn.authenticateWithPassword(usr, psword);
	} catch (IOException e) {   
		System.err.printf(&amp;quot;用户%s密码%s登录服务器%s失败！&amp;quot;, usr, psword, ip);
		e.printStackTrace();
  }
  return false;
}
/**
  * 上传本地文件到服务器目录下
  * @param conn Connection对象
  * @param fileName 本地文件
  * @param remotePath 服务器目录
  */
public void putFile(Connection conn, String fileName, String remotePath){
	SCPClient sc = new SCPClient(conn);
	try {
		//将本地文件放到远程服务器指定目录下，默认的文件模式为 0600，即 rw，
		//如要更改模式，可调用方法 put(fileName, remotePath, mode),模式须是4位数字且以0开头
		sc.put(fileName, remotePath);
	} catch (IOException e) {
		e.printStackTrace();
	}
}
/**
  * 下载服务器文件到本地目录
  * @param fileName 服务器文件
  * @param localPath 本地目录
  */
public void copyFile(Connection conn, String fileName,String localPath){
	SCPClient sc = new SCPClient(conn);
	try {
		sc.get(fileName, localPath);
	} catch (IOException e) {
		e.printStackTrace();
	}
}
/**
 * 在远程LINUX服务器上，在指定目录下，获取文件各个属性
 * @param[in] conn Conncetion对象
 * @param[in] remotePath 远程主机的指定目录
 */
public void getFileProperties(Conncetion conn, String remotePath){
	try {
		SFTPv3Client sft = new SFTPv3Client(conn);
		Vector&amp;lt;?&amp;gt; v = sft.ls(remotePath);
       
		for(int i=0;i&amp;lt;v.size();i++){
			SFTPv3DirectoryEntry s = new SFTPv3DirectoryEntry();
			s = (SFTPv3DirectoryEntry) v.get(i);
			//文件名
			String filename = s.filename;
			//文件的大小
			Long fileSize = s.attributes.size;
		}
			
		sft.close();
       
	} catch (Exception e1) {
		e1.printStackTrace();
	}
}
/**
 * 在远程LINUX服务器上，在指定目录下，删除指定文件
 * @param[in] fileName 文件名
 * @param[in] remotePath 远程主机的指定目录
 * @return
 */
public void delFile(String remotePath, String fileName){
	try {
		SFTPv3Client sft = new SFTPv3Client(conn);
		//获取远程目录下文件列表
		Vector&amp;lt;?&amp;gt; v = sft.ls(remotePath);
   
		for(int i=0;i&amp;lt;v.size();i++){
			SFTPv3DirectoryEntry s = new SFTPv3DirectoryEntry();
			s = (SFTPv3DirectoryEntry) v.get(i);
			//判断列表中文件是否与指定文件名相同
			if(s.filename.equals(fileName)){
				//rm()方法中，须是文件绝对路径+文件名称
				sft.rm(remotePath + s.filename);
			}
		sft.close();
	} catch (Exception e1) {
		e1.printStackTrace();
	}
}

/**
 * 执行脚本
 * @param conn Connection对象
 * @param cmds 要在linux上执行的指令
 */
public int exec(Connection conn, String cmds){
	InputStream stdOut = null;
	InputStream stdErr = null;
	int ret = -1;
	try {
		//在connection中打开一个新的会话
		Session session = conn.openSession();
		//在远程服务器上执行linux指令
		session.execCommand(cmds);
		//指令执行结束后的输出
		stdOut = new StreamGobbler(session.getStdout());
		//指令执行结束后的错误
		stdErr = new StreamGobbler(session.getStderr());
		//等待指令执行结束
		session.waitForCondition(ChannelCondition.EXIT_STATUS, TIME_OUT);
	   	//取得指令执行结束后的状态
		ret = session.getExitStatus(); 
		
		conn.close();
	}catch(Exception e){
		 e.printStackTrace();
	}
 
	return ret;
}


作者：我有健康
来源：CSDN
原文：https://blog.csdn.net/QQ156881887/article/details/80209864
版权声明：本文为博主原创文章，转载请附上博文链接！

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://shingmoyeung.coding.me/post/shi-yong-java-deng-lu-yuan-cheng-linux-bing-dui-fu-wu-shi-xian-ge-chong-cao-zuo">Read More ~</a>
                            </div>
                </div>
            </article>
            
                <!-- 翻页 -->
                
                </div>
                <!--  -->
                <div class="main-container-middle"></div>
                <!--  -->
                <div id="sidebar" class="main-container-right">

                    <!-- 个人信息 -->
                    
    <div class="id_card i-card">
        <div class="id_card-avatar" style="background-image: url(https://shingmoyeung.coding.me/images/avatar.png?v=1569673769938)">
        </div>
        <h1 class="id_card-title">
            代码人生
        </h1>
        <h2 class="id_card-description">
            代码 人生 感悟 分享
        </h2>
        <!--  -->
        <div class="id_card-sns">
            <!-- github -->
            
                <a href="https://github.com/ShingmoYeung" target="_blank" rel="noopener noreferrer"><i
                class="fa fa-github"></i></a>
                
                    <!-- twitter -->
                    
                            <!-- weibo -->
                            
                                    <!-- facebook -->
                                    

        </div>
    </div>
    

                        <!-- 公告栏 -->
                        
    <div class="notice-card i-card ">
        <div class="notice-title i-card-title">公告</div>
        <div class="notice-content">
            随心 随性
        </div>
    </div>
    

                </div>
            </div>



            <div class="site-footer">
  Powered by <a href="https://codingforever.cn" target="_blank">The Code of Life</a> | 
  <a class="rss" href="https://shingmoyeung.coding.me/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
</body>

</html>