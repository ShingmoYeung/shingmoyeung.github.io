<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>JVM性能调优工具之jps | 代码人生</title>
<meta name="description" content="代码 人生 感悟 分享">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://jkju7q.coding-pages.com/favicon.ico?v=1587198596772">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://jkju7q.coding-pages.com/styles/main.css">


  

  
    <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css" />
  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://jkju7q.coding-pages.com">
        <img src="https://jkju7q.coding-pages.com/images/avatar.png?v=1587198596772" class="site-logo">
        <h1 class="site-title">代码人生</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/ShingmoYeung" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      代码 人生 感悟 分享
    </div>
    <div class="site-footer">
      Powered by <a href="https://codingforever.cn" target="_blank">The Code of Life</a> | <a class="rss" href="https://jkju7q.coding-pages.com/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">JVM性能调优工具之jps</h2>
            <div class="post-date">2018-12-17 12:37</div>
            
            <div class="post-content">
              <h2 id="概述">概述</h2>
<p>jps 命令类似与 linux 的 ps 命令，但是它只列出系统中所有的 Java 应用程序。 通过 jps 命令可以方便地查看 Java 进程的启动类、传入参数和 Java 虚拟机参数等信息。</p>
<p>如果在 linux 中想查看 java 的进程，一般我们都需要 ps -ef | grep java 来获取进程 ID。<br>
如果只想获取 Java 程序的进程，可以直接使用 jps 命令来直接查看。</p>
<h2 id="jps-用法">jps 用法</h2>
<figure data-type="image" tabindex="1"><img src="https://jkju7q.coding-pages.com/post-images/1581309657557.png" alt="" loading="lazy"></figure>
<h3 id="参数说明">参数说明</h3>
<p>-q：只输出进程 ID<br>
-m：输出传入 main 方法的参数<br>
-l：输出完全的包名，应用主类名，jar的完全路径名<br>
-v：输出jvm参数<br>
-V：输出通过flag文件传递到JVM中的参数</p>
<p>[hostid]：远程服务器地址，jps 支持远程调用<br>
[protocol:][[//]hostname][:port][/servername]<br>
示例一：jps<br>
无参数：显示进程的ID 和 类的名称<br>
<img src="https://jkju7q.coding-pages.com/post-images/1581309699718.png" alt="" loading="lazy"><br>
jps 不带参数，默认显示 进程ID 和 启动类的名称。</p>
<p>示例二：jps -q<br>
参数 -q 只输出进程ID，而不显示出类的名称<br>
<img src="https://jkju7q.coding-pages.com/post-images/1581309713509.png" alt="" loading="lazy"></p>
<p>示例三：jps -m<br>
参数 -m 可以输出传递给 Java 进程（main 方法）的参数。<br>
<img src="https://jkju7q.coding-pages.com/post-images/1581309728452.png" alt="" loading="lazy"></p>
<p>示例四：jps -l<br>
参数 -l 可以输出主函数的完整路径（类的全路径）。<br>
<img src="https://jkju7q.coding-pages.com/post-images/1581309741298.png" alt="" loading="lazy"></p>
<p>示例五：jps -v<br>
参数 -v 可以显示传递给 Java 虚拟机的参数。<br>
<img src="https://jkju7q.coding-pages.com/post-images/1581309754159.png" alt="" loading="lazy"></p>
<h2 id="获取远程服务器-jps-信息">获取远程服务器 jps 信息</h2>
<p>jps 支持查看远程服务上的 jvm 进程信息。如果需要查看其他机器上的 jvm 进程，需要在待查看机器上启动 jstatd 服务。<br>
开启 jstatd 服务<br>
启动 jstatd 服务，需要有足够的权限。 需要使用 Java 的安全策略分配相应的权限。<br>
创建 jstatd.all.policy 策略文件。<br>
grant codebase &quot;file:${java.home}/../lib/tools.jar&quot; {<br>
permission java.security.AllPermission;<br>
};</p>
<h3 id="启动-jstatd-服务器">启动 jstatd 服务器</h3>
<p>jstatd -J-Djava.security.policy=jstatd.all.policy -J-Djava.rmi.server.hostname=192.168.31.241<br>
-J 参数是一个公共的参数，如 jps、 jstat 等命令都可以接收这个参数。 由于 jps、 jstat 命令本身也是 Java 应用程序， -J 参数可以为 jps 等命令本身设置 Java 虚拟机参数。<br>
-Djava.security.policy：指定策略文件<br>
-Djava.rmi.server.hostname：指定服务器的ip地址（可忽略）</p>
<p>默认情况下， jstatd 开启在 1099 端口上开启 RMI 服务器。<br>
<img src="https://jkju7q.coding-pages.com/post-images/1581309774304.png" alt="" loading="lazy"></p>
<h2 id="jps-原理">jps 原理</h2>
<p>java程序在启动以后，会在java.io.tmpdir指定的目录下，就是临时文件夹里，生成一个类似于hsperfdata_User的文件夹，这个文件夹里（在Linux中为/tmp/hsperfdata_{userName}/），有几个文件，名字就是java进程的pid，因此列出当前运行的java进程，只是把这个目录里的文件名列一下而已。 至于系统的参数什么，就可以解析这几个文件获得。<br>
window系统显示如下：<br>
<img src="https://jkju7q.coding-pages.com/post-images/1581309786385.png" alt="" loading="lazy"><br>
从文件中可以看出 1864、4296、12600 跟上面的 jps 命令输出的进程 ID 一致。</p>
<blockquote>
<p>作者：jijs<br>
链接：https://www.jianshu.com/p/d39b2e208e72<br>
來源：简书<br>
简书著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。</p>
</blockquote>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://jkju7q.coding-pages.com/tag/2018-12/" class="tag">
                    2018-12
                  </a>
                
                  <a href="https://jkju7q.coding-pages.com/tag/jdk/" class="tag">
                    JDK
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://jkju7q.coding-pages.com/post/dan-ji-bu-shu-hbase-21-pei-zhi-wen-jian/">
                  <h3 class="post-title">
                    单机部署HBase 2.1配置文件
                  </h3>
                </a>
              </div>
            

            
              

              
                <div id="disqus_thread" data-aos="fade-in"></div>
              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  

  
    <script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>
    <script>

    var options = {
      shortname: 'codingforever',
      apikey: 'Ex7kW5Rj5HlJfSXMDpiO2xzYENfMTeEKV4zLTfgXca2XHftV9fzfjVwrLdrbd16T',
    }
    if ('') {
      options.api = ''
    }
    var dsqjs = new DisqusJS(options)

    </script>
  




  </body>
</html>
